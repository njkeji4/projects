<!DOCTYPE html>
<html lang="en">
	<head>
		<title>3d 智慧机楼11</title>
		<meta charset="utf-8">		
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				background-color: #225f93;
				color: #ecf0f5;
				overflow:hidden;
			}

			a {
				color: #f00;
			}
		</style>
	</head>

	<body>		
		
		<div id="3dcontainer" style="position:absolute;left:0;top:0;width:100%; height:100%;"/>
		
		<!--div>
			<div class="left_panel" style="position:absolute;top:10px;left:10px;width:279px; height:719px;color:white;
					background-color:rgb(13,14,50,0.5);padding-left:10px; background-image: url(images/bg0.png);opacity:0.8">
				
			</div>
			
			<div class="left_panel" style="position:absolute;top:10px;right:10px;width:279px; height:719px;color:white;
					background-color:rgb(13,14,50,0.5);padding-left:10px; background-image: url(images/bg.png);opacity:0.8">
				
			</div>
			
			
			<div style="position:absolute;bottom:0px;left:500px;width:400px; height:60px;color:white;
					padding-left:10px;text-align:center;background-image: url(images/bg3.png);opacity:0.8" 
					onclick='window.open("./pcroom.html");'>
				
			<div >
			
		</div-->
		

		<script type="module">
			
			import * as THREE from './3js/build/three.module.js';
			import { OrbitControls } from './3js/examples/jsm/controls/OrbitControls.js';
			
			import { THREEx }  from './threex.proceduralcity2.js';

			var renderer	= new THREE.WebGLRenderer({
				antialiasing	: true
			});
			renderer.setSize( window.innerWidth, window.innerHeight );
			document.getElementById("3dcontainer").appendChild(renderer.domElement);
			//document.body.appendChild(  );	

			//document.addEventListener( 'click', onDocumentMouseClick, false );			
			
			var scene	= new THREE.Scene();
			scene.fog	= new THREE.FogExp2( 0xd0e0f0, 0.0025 );
			scene.background= new THREE.Color(0x225f93);
			var camera	= new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000 );
			
			var proceduralCity	= new THREEx.ProceduralCity(renderer)
			var mesh	= proceduralCity.createSquareCity()
			scene.add(mesh)
			
			var spotlight = new THREE.SpotLight( 0x0000ff, 5, 1000 );
			spotlight.position.set( 0, 30, 150 );
			spotlight.angle = 0.45;
			spotlight.penumbra = 0.1;
				
				spotlight.lookAt(0,60,0)
				
			spotlight.castShadow = true;
			spotlight.shadow.mapSize.width = 1024;
			spotlight.shadow.mapSize.height = 1024;			
			scene.add( spotlight );
						
			////
			var textureLoader = new THREE.TextureLoader();
			var texture	= textureLoader.load( "./texture/yd.jpg");//glassbuilding.png" );
			texture.wrapS = THREE.RepeatWrapping;
			texture.wrapT = THREE.RepeatWrapping;
			var geometry = new THREE.PlaneGeometry( 50, 15 );
			var material = new THREE.MeshPhongMaterial( {map:texture, side: THREE.DoubleSide} );
			var plane = new THREE.Mesh( geometry, material );
			plane.position.y = 62;
			mesh.add( plane );
			
			var light	= new THREE.HemisphereLight( 0xfffff0, 0x101020, 1.25 );
			light.position.set( 0.75, 1, 0.25 );
			scene.add( light );
			
			var controls = new OrbitControls( camera, renderer.domElement );
			
			camera.position.set( 0, 100, 145 );
			
			controls.update();
			
			var time = 0,count = 1;
			function animate(){
						requestAnimationFrame( animate );

						//mesh.rotation.x += 0.01;
						mesh.rotation.y += 0.003;
						
						controls.update();

						renderer.render( scene, camera );
						
						
			};			
			
			animate();
			
			camera.lookAt( scene.position )
	
		</script>
	</body>
</html>